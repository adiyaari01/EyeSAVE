var Ue=Object.defineProperty,Ve=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable;var Ne=(t,r,l)=>r in t?Ue(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,Z=(t,r)=>{for(var l in r||(r={}))Ye.call(r,l)&&Ne(t,l,r[l]);if(Ee)for(var l of Ee(r))Ge.call(r,l)&&Ne(t,l,r[l]);return t},J=(t,r)=>Ve(t,He(r));import{c as B,R as V,u as Q,j as e,a as oe,b as n,L as Ze,d as Je,e as Te,f as qe,g as de,h as Ke,i as Pe,k as Fe,l as Qe,m as Xe,N as et,B as L,n as We,r as m,S as k,A as tt,T as _e,I as U,o as rt,p as at,q as O,D as nt,O as lt,F as R,G as x,C as D,s as H,t as Y,v as it,w as G,P as te,x as X,y as st,z as v,E as ce,H as he,J as w,K as ke,M as ue,Q as F,U as De,V as Re,W as Be,X as $e,Y as me,Z as pe,_ as q,$ as j,a0 as ot,a1 as dt,a2 as ct,a3 as se,a4 as M,a5 as ht,a6 as K,a7 as ge,a8 as fe,a9 as xe,aa as ut,ab as mt,ac as pt,ad as gt,ae as ft,af as T,ag as xt,ah as vt,ai as bt,aj as yt}from"./vendor.59c5d0a1.js";const Ct=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}};Ct();const $="https://eyesave.herokuapp.com",St=async()=>{const{body:t}=await B.exports.get(`${$}/childrenAttendance`);return t},Et=async()=>{const{body:t}=await B.exports.get(`${$}/staffAttendance`);return t},Nt=async()=>{const{body:t}=await B.exports.get(`${$}/children`);return t},_t=async()=>{const{body:t}=await B.exports.get(`${$}/escorts`);return t},kt=async()=>{const{body:t}=await B.exports.get(`${$}/staff`);return t},wt=async()=>{const{body:t}=await B.exports.get(`${$}/events`);return t},It=async t=>await B.exports.post(`${$}/staff`).send(t),Lt=async t=>await B.exports.post(`${$}/children`).send(t),At=async t=>await B.exports.post(`${$}/escorts`).send(t),Tt=({setSelf:t,onSet:r})=>{t(St())},qt=({setSelf:t,onSet:r})=>{t(Et())},Pt=({setSelf:t,onSet:r})=>{t(Nt())},Ft=({setSelf:t,onSet:r})=>{t(_t())},Wt=({setSelf:t,onSet:r})=>{t(kt())},Dt=({setSelf:t,onSet:r})=>{t(wt())},re=V({key:"IsLoggedInState",default:!0}),Rt=V({key:"childrenAttendanceState",default:null,effects_UNSTABLE:[Tt]}),Bt=V({key:"staffAttendanceState",default:null,effects_UNSTABLE:[qt]}),ve=V({key:"childrenInfoState",default:null,effects_UNSTABLE:[Pt]}),$t=V({key:"escortsInfoState",default:null,effects_UNSTABLE:[Ft]}),ze=V({key:"staffInfoState",default:null,effects_UNSTABLE:[Wt]}),zt=V({key:"evetnsState",default:null,effects_UNSTABLE:[Dt]});var Mt="/assets/logo.0f66d6c0.png",Ot=()=>{const t=Q();return e("div",{children:e("img",{onClick:()=>t("/"),src:Mt,width:"250",height:"80",style:{cursor:"pointer"}})})};const W=({Icon:t,to:r,label:l,handleClick:i})=>e("div",{className:"nav-item",children:r?n(et,{to:r,style:{color:"#E3E3E3"},children:[e(t,{fontSize:"large"}),l]}):n(L,{component:"a",onClick:i,style:{color:"#E3E3E3"},children:[e(t,{fontSize:"large"}),l]})});var jt=()=>{const t=Q(),r=oe(re);return n(Ze,{sx:{width:"100%",maxWidth:360},children:[e(W,{to:"/",label:"Home",Icon:Je}),e(W,{to:"watchLive",label:"Live",Icon:Te}),e(W,{to:"recordings",label:"Recordings",Icon:qe}),e(W,{to:"messages",label:"Messages",Icon:de}),e(W,{to:"attendance",label:"Attendance",Icon:Ke}),e(W,{to:"children",label:"ChildrenInfo",Icon:Pe}),e(W,{to:"staff",label:"StaffInfo",Icon:Fe}),e(W,{to:"events",label:"Events",Icon:Qe}),e(W,{handleClick:()=>{r(!1),t("/login")},label:"Logout",Icon:Xe})]})};const Ut=We({paper:{backgroundColor:"#3F424C !important"}}),le=280;var Vt=m.exports.memo(()=>{const[t,r]=m.exports.useState(!1),l=()=>r(o=>!o),i={background:"#575E68"},s=Ut();return n(k,{direction:"row",children:[e(tt,{position:"fixed",style:{boxShadow:"none"},children:n(_e,{style:i,children:[e(U,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:l,children:e(rt,{})}),e("div",{style:{display:"flex",flexGrow:1}}),e(at,{})]})}),e(O,{component:"nav",sx:{width:{md:le},flexShrink:{md:0}},"aria-label":"mailbox folders",children:n(nt,{anchor:"left",variant:"permanent",classes:s,onClose:()=>l(),sx:{display:{xs:"none",sm:"none",md:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:le}},children:[e(Ot,{}),e(jt,{})]})}),n(O,{component:"main",sx:{flexGrow:1,p:3,width:{md:`calc(100% - ${le}px)`}},children:[e(_e,{}),e(lt,{})]})]})});const Ht=We({root:{backgroundColor:"#3F424C !important",color:"#E3E3E3 !important",borderRadius:"16px !important",cursor:"pointer"}});var Yt=m.exports.memo(()=>{const t=Ht(),r=Q();return n(R,{children:[n(x,{container:!0,spacing:2,justifyContent:"center",mb:2,children:[e(x,{item:!0,xs:10,sm:4,md:4,children:n(D,{align:"center",classes:t,onClick:()=>r("/watchLive"),children:[e(H,{sx:{color:"#5FEBDC"},title:"Watch LIVE"}),e(Y,{children:e(Te,{sx:{fontSize:"100px"}})})]})}),e(x,{item:!0,xs:10,sm:4,md:4,children:n(D,{align:"center",classes:t,onClick:()=>r("/recrdongs"),children:[e(H,{sx:{color:"#c1e67a"},title:"Recordings"}),e(Y,{children:e(qe,{sx:{fontSize:"100px"}})})]})})]}),n(x,{container:!0,spacing:2,justifyContent:"center",mt:2,children:[e(x,{item:!0,xs:10,sm:2.5,md:2.5,children:n(D,{align:"center",classes:t,onClick:()=>r("/staff"),children:[e(H,{sx:{color:"#FDCA51"},title:"Staff info"}),e(Y,{children:e(Fe,{sx:{fontSize:"100px"}})})]})}),e(x,{item:!0,xs:10,sm:2.5,md:2.5,children:n(D,{align:"center",classes:t,onClick:()=>r("/children"),children:[e(H,{sx:{color:"#F868A3"},title:"Children info"}),e(Y,{children:e(Pe,{sx:{fontSize:"100px"}})})]})}),e(x,{item:!0,xs:10,sm:2.5,md:2.5,children:n(D,{align:"center",classes:t,onClick:()=>r("/Forms"),children:[e(H,{sx:{color:"#4DDA90"},title:"Forms"}),e(Y,{children:e(it,{sx:{fontSize:"100px"}})})]})}),e(x,{item:!0,xs:10,sm:2.5,md:2.5,children:n(D,{align:"center",classes:t,onClick:()=>r("/Messages"),children:[e(H,{sx:{color:"#c483d9"},title:"Messages"}),e(Y,{children:e(de,{sx:{fontSize:"100px"}})})]})})]})]})}),Gt=()=>e(G,{children:"Kindergarten"});const Zt=()=>{const t=Q(),r=oe(re),l={padding:20,width:280,height:"70vh",margin:"50px auto"},i={backgroundColor:"#BC88C9"},s={margin:"8px 0"},o={margin:"8px 0"};return e("div",{children:e(x,{align:"center",children:n(te,{elevation:10,style:l,children:[e(X,{style:i,children:e(st,{})}),e("h2",{children:"Sign In"}),e(v,{style:o,label:"Email",placeholder:"Enter an email address",fullWidth:!0,required:!0}),e(v,{style:o,label:"Password",placeholder:"Enter a password",type:"password",fullWidth:!0,required:!0}),e(ce,{control:e(he,{defaultChecked:!0,color:"default"}),label:"remember me"}),e(L,{variant:"contained",style:s,color:"secondary",fullWidth:!0,onClick:()=>{r(!0),t("/")},children:"SIGN IN"}),e(w,{children:e(ke,{href:"#",children:"Forgot password?"})}),n(w,{children:["Do you have an account?",e(ke,{href:"#",children:"Sign up"})]})]})})})},Jt=()=>{const t=Q(),r=oe(re);return e("div",{children:e(x,{align:"center",children:n(te,{elevation:10,style:{padding:20,width:300,height:"80vh",margin:"50px auto"},children:[n(x,{children:[e(X,{style:{backgroundColor:"#BC88C9"},children:e(ue,{})}),e("h2",{children:"Sign Up"}),e(w,{variant:"caption",gutterBottom:!0,children:"Please fill this form to create an account"})]}),n("form",{children:[e(v,{fullWidth:!0,id:"standard-basic",label:"Full Name",variant:"standard",placeholder:"Enter your name"}),e(v,{fullWidth:!0,id:"standard-basic",label:"Email",variant:"standard",placeholder:"Enter your email"}),e(v,{fullWidth:!0,id:"standard-basic",label:"Phone Number",variant:"standard",placeholder:"Enter your phone number"}),e(v,{fullWidth:!0,id:"standard-basic",label:"Password",variant:"standard",placeholder:"Enter a password"}),e(v,{fullWidth:!0,id:"standard-basic",label:"Confirm Password",variant:"standard",placeholder:"Enter again your password"}),e(ce,{control:e(he,{defaultChecked:!0,color:"default"}),label:"I accept the terms and conditions."}),e(L,{type:"submit",variant:"contained",style:{margin:"8px 0"},color:"secondary",fullWidth:!0,onClick:()=>{r(!0),t("/home")},children:"SIGN UP"})]})]})})})};function Kt(t){return e(k,{direction:"row",flexWrap:"wrap",gap:3,children:t.items.map(r=>{var d,p,f,a,h;const l=(d=r.report)==null?void 0:d._arrivalTime,i=(p=r.report)==null?void 0:p._departureTime,s=(f=r.report)==null?void 0:f._absance,o=(a=r.report)==null?void 0:a._childDelay;return console.log((h=r.report)==null?void 0:h._absance),n(D,{sx:{width:160,height:180,position:"relative",backgroundColor:"#3F424C !important",color:"#E3E3E3 !important",borderRadius:"5px !important",boxShadow:3},children:[!l&&!i&&!s&&!o&&e("div",{className:"dot",style:{width:15,height:15,borderRadius:"50%",background:"#FAC852",position:"absolute",top:"5px",left:"5px"}}),o&&o!=="false"&&e(w,{fontSize:"14px",sx:{color:"#5FEBDC",position:"absolute",top:"5px",left:"5px"},children:"Delay"}),n(k,{sx:{color:"#E3E3E3"},alignItems:"center",gap:1,p:2,children:[e("img",{src:r._imageUrl,width:50,height:50,style:{borderRadius:"50%"},alt:""}),n(w,{children:[r._firstName," ",r._lastName]}),n(k,{justifyContent:l?"flex-end":"flex-start",direction:"row",sx:{fontFamily:"sans-serif",width:132,height:22,borderRadius:5,backgroundColor:l?"#AAF8D0":"#999999"},children:[!l&&e(k,{sx:{width:72,height:22,borderRadius:5,backgroundColor:"#596068",fontSize:12,justifyContent:"center",alignItems:"center"},children:"Check in"}),!!l&&e(k,{sx:{width:65,height:22,borderRadius:5,backgroundColor:l?"#1E8D7F":"#596068",fontSize:14,justifyContent:"center",alignItems:"center"},children:l})]}),n(k,{justifyContent:i?"flex-end":"flex-start",direction:"row",sx:{fontFamily:"sans-serif",width:132,height:22,borderRadius:5,backgroundColor:i?"#FBBCD7":"#999999"},children:[!i&&e(k,{sx:{width:72,height:22,borderRadius:5,backgroundColor:"#596068",fontSize:12,justifyContent:"center",alignItems:"center"},children:"Check out"}),!!i&&e(k,{sx:{width:65,height:22,borderRadius:5,backgroundColor:l?"#E7307C":"#596068",fontSize:14,justifyContent:"center",alignItems:"center"},children:i})]})]})]},r._id)})})}const ie=()=>{let t=new Date,r=("0"+t.getDate()).slice(-2),l=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+l+"-"+r};var Qt=()=>{const t=F(Rt),r=F(ve);F(Bt);const l=t.filter(a=>a._date===ie());console.log("todayReports",l),console.log(t),console.log(r);const i=r.map(a=>{const h=l.find(c=>c._childId===a._id);return J(Z({},a),{report:h})}),s=i.filter(a=>{var h;return(h=a.report)==null?void 0:h._arrivalTime}),o=i.filter(a=>{var h,c;return((h=a.report)==null?void 0:h._childDelay)===!0&&!((c=a.report)==null?void 0:c._arrivalTime)}),d=r.filter(a=>t.find(h=>{const c=h._childId===a._id,b=h._date===ie(),y=h._absence&&!h._arrivalTime;return c&&b&&y})),p=r.filter(a=>!t.filter(c=>c._date===ie()).find(c=>c._childId==a._id));console.log("arrivedItems",s),console.log("lates",o),console.log("unknow",p),console.log("absance",d);const f=[...p,...d,...o,...s];return e(G,{children:e(k,{direction:"row",flexWrap:"wrap",gap:3,children:e(Kt,{items:f})})})};function Xt(t){return e(k,{justifyContent:"left",direction:"row",flexWrap:"wrap",gap:3,children:t.items.map(r=>e(D,{sx:{width:270,height:200,backgroundColor:"#3F424C !important",borderRadius:"5px !important",color:"#E3E3E3",boxShadow:3},children:n(k,{alignItems:"center",gap:1,p:2,children:[e("img",{src:r._imageUrl,width:80,height:80,style:{borderRadius:"50%"},alt:""}),n(w,{children:[r._firstName," ",r._lastName]}),n(w,{children:["Address:",r._address]}),n(w,{children:["Birthday: ",r._birthdate]})]})},r._id))})}var er=()=>{const[t,r]=m.exports.useState(!1),[l,i]=m.exports.useState(""),[s,o]=m.exports.useState(""),[d,p]=m.exports.useState(""),[f,a]=m.exports.useState(""),[h,c]=m.exports.useState(0),[b,y]=m.exports.useState(0),[u,_]=m.exports.useState(0),I=F(ve),A=()=>{r(!0)},E=()=>{r(!1)};return n(G,{children:[e(L,{sx:{color:"#BC88C9",display:"flex",justifyContent:"center",width:"100%"},onClick:A,children:e(X,{style:{backgroundColor:"#BC88C9"},children:e(ue,{})})}),n(De,{open:t,onClose:E,children:[e(Re,{sx:{background:"#E3E3E3"},children:"Child and Parent Details"}),e(Be,{sx:{background:"#E3E3E3"},children:n("form",{children:[e(v,{onChange:()=>{i(event.target.value)},fullWidth:!0,id:"standard-basic",name:"childFirstName",label:"Child First Name",variant:"standard",placeholder:"Enter child first name",type:"text"}),e(v,{onChange:()=>{o(event.target.value)},fullWidth:!0,id:"standard-basic",name:"childLastName",label:"Child Last Name",variant:"standard",placeholder:"Enter child last name",type:"text"}),e(v,{onChange:()=>{y(event.target.value)},fullWidth:!0,id:"standard-basic",name:"childId",label:"Child Id",variant:"standard",placeholder:"Enter child Id",type:"number"}),e(v,{onChange:()=>{p(event.target.value)},fullWidth:!0,id:"standard-basic",name:"parentFirstName",label:"Parent First Name",variant:"standard",placeholder:"Enter parent first name",type:"text"}),e(v,{onChange:()=>{a(event.target.value)},fullWidth:!0,id:"standard-basic",name:"parentLastName",label:"Parent Laste Name",variant:"standard",placeholder:"Enter parent last name",type:"text"}),e(v,{onChange:()=>{_(event.target.value)},fullWidth:!0,id:"standard-basic",name:"parentId",label:"Parent Id",variant:"standard",placeholder:"Enter parent Id",type:"number"}),e(v,{onChange:()=>{c(event.target.value)},fullWidth:!0,id:"standard-basic",name:"phoneNumber",label:"Phone Numbe",variant:"standard",placeholder:"Enter parent phone number",type:"number"})]})}),n($e,{sx:{background:"#E3E3E3"},children:[e(L,{style:{margin:"15px",color:"#3F414D"},onClick:E,children:"Cancel"}),e(L,{variant:"contained",style:{margin:"8px 0"},color:"secondary",onClick:async()=>{const N={_firstName:l,_lastName:s,_id:parseInt(b),_escort:[parseInt(u)]},g={_firstName:d,_lastName:f,_id:parseInt(u),_phone:h,_children:[parseInt(b)],_relation:"Parent"};await Lt(N),await At(g),E()},children:"SUBMIT"})]})]}),e(k,{direction:"row",flexWrap:"wrap",gap:3}),e(Xt,{items:I})]})};function tr(t){return e(k,{justifyContent:"center",direction:"row",flexWrap:"wrap",gap:3,children:t.items.map(r=>e(D,{sx:{width:280,height:280,backgroundColor:"#3F424C !important",borderRadius:"5px !important",color:"#E3E3E3",boxShadow:3},children:n(k,{alignItems:"center",gap:1,p:2,children:[e("img",{src:r._imageUrl,width:80,height:80,style:{borderRadius:"50%"},alt:""}),n(w,{children:[r._firstName," ",r._lastName]}),n(w,{children:["Position: ",r._position]}),n(w,{children:["Phone: ",r._phone]}),n(w,{children:["Address: ",r._address]}),n(w,{children:["Birthday: ",r._birthdate]})]})},r._id))})}var rr=()=>{const[t,r]=m.exports.useState(!1),[l,i]=m.exports.useState(""),[s,o]=m.exports.useState(""),[d,p]=m.exports.useState(0),[f,a]=m.exports.useState(0),[h,c]=m.exports.useState(""),b=F(ze),y=()=>{r(!0)},u=()=>{r(!1)};return n(G,{children:[e(L,{sx:{color:"#BC88C9",display:"flex",justifyContent:"center",width:"100%"},onClick:y,children:e(X,{style:{backgroundColor:"#BC88C9"},children:e(ue,{})})}),n(De,{open:t,onClose:u,children:[e(Re,{sx:{background:"#E3E3E3"},children:"Employee Details"}),e(Be,{sx:{background:"#E3E3E3"},children:n("form",{children:[e(v,{onChange:()=>{i(event.target.value)},fullWidth:!0,id:"standard-basic",name:"cmployeeFirstName",label:"Employee First Name",variant:"standard",placeholder:"Enter employee first name",type:"text"}),e(v,{onChange:()=>{o(event.target.value)},fullWidth:!0,id:"standard-basic",name:"cmployeeLastName",label:"Employee Last Name",variant:"standard",placeholder:"Enter employee lasr name",type:"text"}),e(v,{fullWidth:!0,onChange:()=>{a(event.target.value)},id:"standard-basic",name:"EmployeeId",label:"Employee Id",variant:"standard",placeholder:"Enter employee Id",type:"number"}),e(v,{onChange:()=>{p(event.target.value)},fullWidth:!0,id:"standard-basic",name:"phoneNumber",label:"Phone Number",variant:"standard",placeholder:"Enter parent phone number",type:"number"}),e(O,{sx:{minWidth:120,textAlign:"left"},children:e(me,{children:n(pe,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:h,onChange:P=>{c(P.target.value)},sx:{color:"#3F414D",width:"100%",minWidth:"150px",height:"30px",mt:"20px"},children:[e(q,{value:"Teacher",children:"Teacher"}),e(q,{value:"Assistant",children:"Assistant"}),e(q,{value:"House keeper",children:"House keeper"}),e(q,{value:"Manager",children:"Manager"}),e(q,{value:"Other",children:"Other"})]})})})]})}),n($e,{sx:{background:"#E3E3E3"},children:[e(L,{style:{margin:"15px",color:"#3F414D"},onClick:u,children:"Cancel"}),e(L,{variant:"contained",style:{margin:"8px 0"},color:"secondary",onClick:async()=>{const P={_firstName:l,_lastName:s,_id:parseInt(f),_phone:d,_position:h};await It(P),u()},children:"SUBMIT"})]})]}),e(k,{justifyContent:"center",direction:"row",flexWrap:"wrap",gap:3}),e(tr,{items:b})]})};function ar(t,r,l,i,s,o){return{date:t,event:r,startTime:l,finishTime:i,child1:s,child2:o}}const nr=[{id:"event",numeric:!1,disablePadding:!0,label:"Event"},{id:"date",numeric:!1,disablePadding:!0,label:"Date"},{id:"startTime",numeric:!1,disablePadding:!1,label:"Start Time"},{id:"finishTime",numeric:!1,disablePadding:!1,label:"Finish Time"},{id:"child1",numeric:!1,disablePadding:!1,label:"Child 1"},{id:"child2",numeric:!1,disablePadding:!1,label:"Child 2"}];function Me(t){const{order:r,orderBy:l}=t;return e(ht,{children:e(se,{children:nr.map(i=>e(M,{align:"center",padding:i.disablePadding?"none":"normal",sortDirection:l===i.id?r:!1,sx:{color:"#A2A4A7",fontSize:"16px"},children:i.label},i.id))})})}Me.propTypes={numSelected:j.number.isRequired,onRequestSort:j.func.isRequired,onSelectAllClick:j.func.isRequired,order:j.oneOf(["asc","desc"]).isRequired,orderBy:j.string.isRequired,rowCount:j.number.isRequired};j.number.isRequired;function lr({events:t,children:r}){const[l,i]=m.exports.useState("asc"),[s,o]=m.exports.useState("event"),[d,p]=m.exports.useState([]),[f,a]=m.exports.useState(0),[h,c]=m.exports.useState(!1),[b,y]=m.exports.useState(5),[u,_]=m.exports.useState([]);m.exports.useEffect(()=>{let S=!0;if(S){const N=t.map(g=>{var be,ye,Ce,Se;const C=r.filter(ne=>ne._id===g._child1),ae=r.filter(ne=>ne._id===g._child2);if(C)var Oe=((be=C[0])==null?void 0:be._firstName)+" "+((ye=C[0])==null?void 0:ye._lastName);if(ae)var je=((Ce=ae[0])==null?void 0:Ce._firstName)+" "+((Se=ae[0])==null?void 0:Se._lastName);return ar(g._date,g._eventType,g._startTime,g._endTime,Oe,je)});_(N)}return()=>{S=!1}},[t]);const I=(S,N)=>{i(s===N&&l==="asc"?"desc":"asc"),o(N)},A=S=>{if(S.target.checked){const N=u.map(g=>g.name);p(N);return}p([])},E=(S,N)=>{const g=d.indexOf(N);let C=[];g===-1?C=C.concat(d,N):g===0?C=C.concat(d.slice(1)):g===d.length-1?C=C.concat(d.slice(0,-1)):g>0&&(C=C.concat(d.slice(0,g),d.slice(g+1))),p(C)},P=S=>d.indexOf(S)!==-1,z=f>0?Math.max(0,(1+f)*b-u.length):0;return u.length?e("div",{children:e(ot,{sx:{mt:5},children:n(dt,{sx:{minWidth:750,backgroundColor:"#3F414D"},"aria-labelledby":"tableTitle",size:h?"small":"medium",children:[e(Me,{numSelected:d.length,order:l,orderBy:s,onSelectAllClick:A,onRequestSort:I,rowCount:u.length}),n(ct,{children:[u.map((S,N)=>{const g=P(S.event);return n(se,{hover:!0,onClick:C=>E(C,S.event),"aria-checked":g,tabIndex:-1,selected:g,children:[e(M,{sx:{fontSize:"16px",color:S.event==="Positive"?"#68B294":S.event==="Negative"?"#AD4675":"#A2A4A7"},align:"center",children:S.event}),e(M,{sx:{fontSize:"16px",color:"#A2A4A7"},align:"center",children:S.date}),e(M,{sx:{fontSize:"16px",color:"#A2A4A7"},align:"center",children:S.startTime}),e(M,{sx:{fontSize:"16px",color:"#A2A4A7"},align:"center",children:S.finishTime}),e(M,{sx:{fontSize:"16px",color:"#A2A4A7"},align:"center",children:S.child1}),e(M,{sx:{fontSize:"16px",color:"#A2A4A7"},align:"center",children:S.child2})]},N)}),z>0&&e(se,{style:{height:(h?33:53)*z},children:e(M,{colSpan:6})})]})]})})}):e("div",{children:"Loading.."})}const ir=()=>{let t=new Date,r=("0"+t.getDate()).slice(-2),l=("0"+(t.getMonth()+1)).slice(-2);return t.getFullYear()+"-"+l+"-"+r};var sr=()=>{const t=F(zt),r=F(ve),[l,i]=m.exports.useState(t),[s,o]=m.exports.useState([]),[d,p]=m.exports.useState([]),[f,a]=m.exports.useState([]),[h,c]=m.exports.useState([]),[b,y]=m.exports.useState([]),[u,_]=m.exports.useState("all");m.exports.useEffect(()=>{const E=t.filter(g=>g._date===ir());o(E);const P=t.filter(g=>g._eventType==="Positive");p(P);const z=s.filter(g=>g._eventType==="Positive");a(z);const S=t.filter(g=>g._eventType==="Negative");c(S);const N=s.filter(g=>g._eventType==="Negative");y(N)},[l]);const I=E=>{A(E.target.value)},A=E=>{switch(_(E),E){case"all":i(t);break;case"today":i(s);break;case"positive":i(d);break;case"positiveToday":i(f);break;case"negative":i(h);break;case"negativeToday":i(b);break}};return l?n(G,{children:[e(w,{sx:{fontSize:"25px",color:"#A2A4A7"},children:"Events"}),e(O,{sx:{minWidth:120,textAlign:"right"},children:e(me,{children:n(pe,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:u,onChange:I,sx:{color:"#3F414D",backgroundColor:"#E2E3E4",width:"100%",minWidth:"150px",height:"30px"},children:[e(q,{value:"all",children:"All"}),e(q,{value:"today",children:"Today"}),e(q,{value:"negative",children:"Negative"}),e(q,{value:"negativeToday",children:"Negative Today"}),e(q,{value:"positive",children:"Positive"}),e(q,{value:"positiveToday",children:"Positive Today"})]})})}),e(lr,{events:l,children:r})]}):e("div",{children:"Loding.."})};const we={parent:{firstName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20,helperText:"Custom error message"},lastName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20},email:{value:"",error:"",required:!0,validate:"email"},phone:{value:"",error:"",required:!0,validate:"phone",maxLength:15},address:{value:"",error:"",required:!0,validate:"text",minLength:10,maxLength:40},id:{value:"",error:"",required:!0,validate:"number",minLength:9,maxLength:9},photo:{value:null,error:"",required:!0}},child:{firstName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20,helperText:"Custom error message"},lastName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20},gender:{value:"",error:"",required:!0,validate:"select"},date:{value:"",required:!0,error:""},id:{value:"",error:"",required:!0,validate:"number",minLength:9,maxLength:9},address:{value:"",error:"",required:!0,validate:"text",minLength:10,maxLength:40},photo:{value:"",error:"",required:!0}},escort:{firstName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20,helperText:"Custom error message"},lastName:{value:"",error:"",required:!0,validate:"text",minLength:2,maxLength:20},agreenemt:{value:!1,error:"",required:!0,validate:"checkbox",helperText:"Please accept our terms and conditions"},phone:{value:"",error:"",required:!0,validate:"phone",maxLength:15},photo:{value:"",error:"",required:!0}}},or=RegExp(/^[A-Z ]+$/i),dr=RegExp(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i),cr=RegExp(/^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4,6})$/),hr=RegExp(/^[0-9]{5}([- /]?[0-9]{4})?$/),ur=RegExp(/^\d+$/),mr="standard",pr="normal",gr=["Parent Step","Child Step","Escort Step"],ee=m.exports.createContext(),fr=({children:t})=>{const[r,l]=m.exports.useState(0),[i,s]=m.exports.useState(we),o=()=>l(a=>a+1),d=()=>l(a=>a-1),p=(a,h,c)=>{const{type:b,name:y,value:u,files:_}=a.target,I=b==="checkbox"?h:b==="file"?_[0]:u,A=JSON.parse(JSON.stringify(i)),E=we[c][y];if(!E)return;const{required:P,validate:z,minLength:S,maxLength:N,helperText:g}=E;let C="";if(P&&!I&&(C="This field is required"),S&&u&&u.length<S&&(C=`Minimum ${S} characters is required.`),N&&u&&u.length>N&&(C="Maximum length exceeded!"),z)switch(z){case"text":u&&!or.test(u)&&(C=g||"This field accepts text only.");break;case"number":u&&!ur.test(u)&&(C=g||"This field accepts numbers only.");break;case"email":u&&!dr.test(u)&&(C=g||"Please enter a valid email address.");break;case"phone":u&&!cr.test(u)&&(C=g||"Please enter a valid phone number. i.e: xxx-xxx-xxxx");break;case"zip":u&&!hr.test(u)&&(C=g||"Please enter a valid zip code.");break;case"checkbox":h||(C=g||"Please provide a valid value.");break;case"select":u||(C=g||"Please select a value.");break}A[c][y]=J(Z({},A[c][y]),{value:I,error:C}),s(A)},f=async()=>{try{console.log("forms values",i);const a=JSON.parse(JSON.stringify(i));for(let I in a)a[I]=Object.keys(a[I]).reduce((A,E)=>(A[E]=a[I][E].value,A),{});const{parent:h,child:c,escort:b}=a;console.log("clone",a);const y=await K({method:"post",url:"https://eyesave.herokuapp.com/escorts/",data:{_firstName:a.escort.firstName,_lastName:a.escort.lastName,_telegramId:"",_address:"",_children:a.child.id,_birthday:"",_phone:"9987654367",_relation:"Escort",_id:989810989}}),u=await K({method:"put",url:`https://eyesave.herokuapp.com/escorts/${a.parent.id}`,data:{_firstName:a.parent.firstName,_lastName:a.parent.lastName,_id:a.parent.id,_address:a.parent.address,_children:a.child.id,_birthday:"",_phone:"9987604367",_relation:"Parent"}}),_=await K({method:"put",url:`https://eyesave.herokuapp.com/escorts/${a.child.id}`,data:{_firstName:a.child.firstName,_lastName:a.child.lastName,_id:a.child.id,_address:a.child.address,_birthday:a.child.date,_gender:a.child.gender}});o()}catch(a){alert("somthing wrong"),console.log(a)}};return e(ee.Provider,{value:{labels:gr,activeStep:r,formValues:i,handleChange:p,handleNext:o,handleBack:d,handleSubmit:f,variant:mr,margin:pr},children:e("div",{className:"mui-step-form",children:t})})},Ie=ge("input")({display:"none"});function xr(){const{formValues:t,handleChange:r,handleNext:l,variant:i,margin:s}=m.exports.useContext(ee),{firstName:o,lastName:d,email:p,phone:f,id:a,address:h,photo:c}=t.parent,b=m.exports.useCallback(()=>Object.keys({firstName:o,lastName:d,email:p,phone:f,id:a,address:h,photo:c}).some(u=>t.parent[u].required&&!t.parent[u].value||t.parent[u].error),[t,o,d,p,f,a,h,c]),y=(u,_=null)=>r(u,_,"parent");return n(R,{children:[n(x,{container:!0,spacing:2,children:[e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"First Name",name:"firstName",placeholder:"Your first name",value:o.value,onChange:y,error:!!o.error,helperText:o.error,required:o.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"Last Name",name:"lastName",placeholder:"Your last name",value:d.value,onChange:y,error:!!d.error,helperText:d.error,required:d.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"Phone number",name:"phone",placeholder:"i.e: xxx-xxx-xxxx",value:f.value,onChange:y,error:!!f.error,helperText:f.error,required:f.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"Email",name:"email",placeholder:"Your email address",type:"email",value:p.value,onChange:y,error:!!p.error,helperText:p.error,required:p.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"I.D.",name:"id",placeholder:"Your Id",value:a.value,onChange:y,error:!!a.error,helperText:a.error,required:a.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:i,margin:s,fullWidth:!0,label:"Address",name:"address",placeholder:"Your address",value:h.value,onChange:y,error:!!h.error,helperText:h.error,required:h.required})}),e(x,{item:!0,xs:12,children:n("label",{htmlFor:"parent-image",children:[e(Ie,{name:"photo",required:c.required,accept:"image/*",id:"parent-image",type:"file",onChange:y}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(fe,{fontSize:"large"})}),"Upload Photo"]})}),e(x,{item:!0,sm:12,children:n("label",{htmlFor:"add-parent",children:[e(Ie,{accept:"image/*",id:"add-parent",type:"file"}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(xe,{fontSize:"large"})}),"Add Parent"]})})]}),e(O,{sx:{display:"flex",justifyContent:"flex-end"},children:e(L,{variant:"contained",sx:{mt:3,ml:1},disabled:b(),color:"primary",onClick:b()?()=>null:l,children:"Next"})})]})}const Le=ge("input")({display:"none"});function vr(){const{formValues:t,handleChange:r,handleBack:l,handleNext:i,variant:s,margin:o}=m.exports.useContext(ee),{firstName:d,lastName:p,id:f,address:a,date:h,gender:c,photo:b}=t.child,y=m.exports.useCallback(()=>Object.keys({firstName:d,lastName:p,date:h,gender:c,id:f,address:a,photo:b}).some(_=>t.child[_].required&&!t.child[_].value||t.child[_].error),[t,d,p,h,c,f,a,b]),u=(_,I=null)=>r(_,I,"child");return n(R,{children:[n(x,{container:!0,spacing:2,children:[e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"First Name",name:"firstName",placeholder:"Enter child first name",value:d.value,onChange:u,error:!!d.error,helperText:d.error,required:d.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"Last Name",name:"lastName",placeholder:"Enter child last name",value:p.value,onChange:u,error:!!p.error,helperText:p.error,required:p.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"I.D.",name:"id",placeholder:"Your Id",value:f.value,onChange:u,error:!!f.error,helperText:f.error,required:f.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,InputLabelProps:{shrink:!0},label:"Date of birth",name:"date",type:"date",defaultValue:h.value,onChange:u,required:h.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"Address",name:"address",placeholder:"Your address",value:a.value,onChange:u,error:!!a.error,helperText:a.error,required:a.required})}),e(x,{item:!0,xs:12,sm:6,children:n(v,{variant:s,margin:o,fullWidth:!0,select:!0,SelectProps:{native:!0},label:"Gender",name:"gender",value:c.value,onChange:u,error:!!c.error,helperText:c.error,required:c.required,children:[e("option",{value:"",children:" "}),e("option",{value:"Male",children:"Male"}),e("option",{value:"Female",children:"Female"})]})}),e(x,{item:!0,xs:12,children:n("label",{htmlFor:"child-image",children:[e(Le,{name:"photo",required:b.required,accept:"image/*",id:"child-image",type:"file",onChange:u}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(fe,{fontSize:"large"})}),"Upload Photo"]})}),e(x,{item:!0,sm:12,children:n("label",{htmlFor:"add-child",children:[e(Le,{accept:"image/*",id:"add-child",type:"file"}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(xe,{fontSize:"large"})}),"Add Child"]})})]}),n(O,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:[e(L,{onClick:l,sx:{mr:1},children:"Back"}),e(L,{variant:"contained",disabled:y(),color:"primary",onClick:y()?()=>null:i,children:"Next"})]})]})}const Ae=ge("input")({display:"none"});function br(){const{formValues:t,handleChange:r,handleBack:l,handleSubmit:i,variant:s,margin:o}=m.exports.useContext(ee),{firstName:d,lastName:p,phone:f,agreenemt:a,photo:h}=t.escort,c=m.exports.useCallback(()=>Object.keys({firstName:d,lastName:p,phone:f,agreenemt:a,photo:h}).some(y=>t.escort[y].required&&!t.escort[y].value||t.escort[y].error),[t,d,p,f,a,h]),b=(y,u=null)=>r(y,u,"escort");return n(R,{children:[n(x,{container:!0,spacing:2,children:[e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"First Name",name:"firstName",placeholder:"Enter escort first name",value:d.value,onChange:b,error:!!d.error,helperText:d.error,required:d.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"Last Name",name:"lastName",placeholder:"Enter escort last name",value:p.value,onChange:b,error:!!p.error,helperText:p.error,required:p.required})}),e(x,{item:!0,xs:12,sm:6,children:e(v,{variant:s,margin:o,fullWidth:!0,label:"Phone number",name:"phone",placeholder:"i.e: xxx-xxx-xxxx",value:f.value,onChange:b,error:!!f.error,helperText:f.error,required:f.required})}),e(x,{item:!0,xs:12,children:n("label",{htmlFor:"escort-image",children:[e(Ae,{name:"photo",required:h.required,accept:"image/*",id:"escort-image",type:"file",onChange:b}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(fe,{fontSize:"large"})}),"Upload Photo"]})}),e(x,{item:!0,xs:12,children:n("label",{htmlFor:"add-escort",children:[e(Ae,{accept:"image/*",id:"add-escort",type:"file"}),e(U,{color:"primary","aria-label":"upload picture",component:"span",children:e(xe,{fontSize:"large"})}),"Add Escort"]})})]}),n(x,{item:!0,xs:12,children:[e(ce,{control:e(he,{checked:a.value,onChange:b,name:"agreenemt",color:"primary",required:a.required}),label:"Agree to terms and conditions"}),e(ut,{error:!!a.error,children:a.error})]}),n(O,{sx:{display:"flex",justifyContent:"flex-end",mt:3},children:[e(L,{sx:{mr:1},onClick:l,children:"Back"}),e(L,{variant:"contained",disabled:c(),color:"primary",onClick:c()?()=>null:i,children:"Submit"})]})]})}function yr(){return n(R,{children:[e(w,{variant:"h2",align:"center",sx:{py:4},children:"Thank you!"}),e(w,{component:"p",align:"center",children:"Your form has been successfully submitted."})]})}const Cr=t=>{switch(t){case 0:return e(xr,{});case 1:return e(vr,{});case 2:return e(br,{});default:throw new Error("Unknown step")}},Sr=()=>{const{activeStep:t,labels:r}=m.exports.useContext(ee);return e(R,{children:t===r.length?e(yr,{}):n(R,{children:[e(mt,{activeStep:t,sx:{py:3},alternativeLabel:!0,children:r.map(l=>e(pt,{children:e(gt,{children:l})},l))}),Cr(t)]})})};var Er=()=>e(fr,{children:e(G,{component:"main",maxWidth:"sm",sx:{mb:4},children:n(te,{variant:"outlined",sx:{my:{xs:3,md:6},p:{xs:2,md:3},background:"#E3E3E3 !important"},children:[e("div",{children:e("h2",{style:{color:"#3F424C"},children:"Child Registration Form"})}),e(Sr,{})]})})}),Nr=()=>n(k,{direction:"row",flexWrap:"wrap",gap:3,children:[e("iframe",{width:"400",height:"230",src:"https://rtsp.me/embed/NHANEa74/",frameBorder:"0"}),e("iframe",{width:"400",height:"230",src:"https://rtsp.me/embed/NHANEa74/",frameBorder:"0"}),e("iframe",{width:"400",height:"230",src:"https://rtsp.me/embed/NHANEa74/",frameBorder:"0"}),e("iframe",{width:"400",height:"230",src:"https://rtsp.me/embed/NHANEa74/",frameBorder:"0"})]});const _r=()=>{const t=F($t),r=F(ze),[l,i]=m.exports.useState({}),s=async()=>{if(console.log("Submit",l),l.userId=="AllParents"){await K({method:"post",url:"https://eyesave-noitfications.herokuapp.com/escort/sendToMany",data:{msg:l.msg}});return}(await K({method:"post",url:"https://eyesave-noitfications.herokuapp.com/escort/send",data:{userId:l.userId,msg:l.msg}})).data.success&&(alert("message send"),i({}))};console.log(t);const o=t.filter(c=>c._relation==="Parent"&&c._telegramID),d=r.filter(c=>c._telegramID);console.log(d);const p={padding:20,width:480,height:"60vh",margin:"30px auto"},f={backgroundColor:"#BC88C9"},a={margin:"8px 0"},h={margin:"8px 0"};return e("div",{children:e(x,{align:"center",children:n(te,{elevation:10,style:p,children:[e(X,{style:f,children:e(de,{})}),e("h2",{children:"Send Message"}),e(O,{sx:{minWidth:120,textAlign:"left"},children:e(me,{children:n(pe,{labelId:"demo-simple-select-label",id:"demo-simple-select",sx:{color:"#3F414D",width:"100%",minWidth:"150px",height:"30px",mt:"20px"},onChange:c=>{console.log(c.target.value),i(J(Z({},l),{userId:c.target.value}))},children:[e(q,{value:"AllParents",children:"All Parents"}),o.map((c,b)=>n(q,{value:c._telegramID,children:[c._firstName," ",c._lastName]},b))]})})}),e(v,{style:h,label:"Text Message",placeholder:"Enter your message",fullWidth:!0,required:!0,multiline:!0,value:l.msg||"",rows:4,onChange:c=>i(J(Z({},l),{msg:c.target.value}))}),e(L,{variant:"contained",style:a,color:"secondary",onClick:s,children:"SEND"})]})})})};var kr=()=>{const t=F(re);return e(m.exports.Suspense,{fallback:e("div",{children:"Loading..."}),children:e(ft,{children:t?e(R,{children:n(T,{path:"/",element:e(Vt,{}),children:[e(T,{index:!0,element:e(Yt,{})}),e(T,{path:"/kindergarten",element:e(Gt,{})}),e(T,{path:"/attendance",element:e(Qt,{})}),e(T,{path:"/children",element:e(er,{})}),e(T,{path:"/staff",element:e(rr,{})}),e(T,{path:"/events",element:e(sr,{})}),e(T,{path:"/watchLive",element:e(Nr,{})}),e(T,{path:"/messages",element:e(_r,{})})]})}):n(R,{children:[e(T,{path:"/login",element:e(Zt,{})}),e(T,{path:"/register",element:e(Jt,{})}),e(T,{path:"/childForm/:kindergartenId",element:e(Er,{})}),e(T,{path:"/",element:e(xt,{to:"/login"})})]})})})};vt.render(e(bt,{children:e(yt,{children:e(kr,{})})}),document.getElementById("root"));
